"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StructureSerializer = void 0;
/**
 * Serializes BitstreamElement instances to/from bitstreams
 */
class StructureSerializer {
    *read(reader, type, parent, field) {
        let g = type.read(reader, { parent, field, context: parent.context });
        while (true) {
            let result = g.next();
            if (result.done === false)
                yield result.value;
            else
                return result.value;
        }
    }
    write(writer, type, instance, field, value) {
        var _a;
        if (!value)
            throw new Error(`Cannot write ${field.type.name}#${String(field.name)}: Value is null/undefined`);
        value.write(writer, { skip: (_a = field.options) === null || _a === void 0 ? void 0 : _a.skip, context: instance === null || instance === void 0 ? void 0 : instance.context });
    }
}
exports.StructureSerializer = StructureSerializer;
//# sourceMappingURL=structure-serializer.js.map